;; gorilla-repl.fileformat = 1

;; **
;;; # Poisson
;;; 
;;; There are several ways in which generative procedures can be constructed in a probabilistic language such as Anglican.  One of them is to directly write sampler code for the process.  This leaves the distribution non-scorable but is one of the most direct justifications for making unbounded recursion and branching on nondeterminism part of the language. 
;; **

;; @@
(ns poisson
  (:require [gorilla-plot.core :as plot])
  (:use clojure.repl
        [anglican core runtime emit [state :only [get-predicts]]] 
        [anglib crp]
        [clojure.string :only (join split blank?)]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; Take, for example, Knuth's algorithm for drawing Poisson distributed random samples given access to uniform continuous pseudo-random numbers:   
;;; 
;;; ```[assume poisson (lambda (rate)
;;;   (begin (define L (exp (* -1 rate)))
;;;          (define inner-loop (lambda (k p)
;;;          (if (< p L) (dec k)
;;;            (begin (define u (uniform-continuous 0 1))
;;;              (inner-loop (inc k) (* p u))))))
;;;          (inner-loop 1 (uniform-continuous 0 1))))]```
;;;          
;;; We can use defquery to define the corresponding distribution 
;; **

;; @@
(defm inner-loop [L k p] 
   (if (< p L) 
          (dec k)
          (let [u (sample (uniform-continuous 0 1))]
            (inner-loop L (inc k) (* p u)))))
 
(defquery my-poisson rate
    (let [L (exp (* -1.0 rate))]
          (predict :s (inner-loop L 1 (sample (uniform-continuous 0 1))))))
      
      
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;poisson/my-poisson</span>","value":"#'poisson/my-poisson"}
;; <=

;; @@
(def rate 50)
(def num-samples 10000)
(def sampler (doquery :lmh my-poisson rate))
(def histplot (plot/histogram (take num-samples (map :s (map get-predicts sampler))) :normalize :probability :bins 100))

(plot/compose histplot (plot/plot #(exp (observe (poisson rate) %)) [0 (* 2 rate)]))

;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"706a7503-27d9-4da1-a202-2d1191f41478","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"706a7503-27d9-4da1-a202-2d1191f41478","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"706a7503-27d9-4da1-a202-2d1191f41478","values":[{"x":25.0,"y":0},{"x":25.51,"y":1.0E-4},{"x":26.020000000000003,"y":4.0E-4},{"x":26.530000000000005,"y":0.0},{"x":27.040000000000006,"y":1.0E-4},{"x":27.550000000000008,"y":0.0},{"x":28.06000000000001,"y":3.0E-4},{"x":28.57000000000001,"y":0.0},{"x":29.080000000000013,"y":1.0E-4},{"x":29.590000000000014,"y":0.0},{"x":30.100000000000016,"y":2.0E-4},{"x":30.610000000000017,"y":0.0},{"x":31.12000000000002,"y":5.0E-4},{"x":31.63000000000002,"y":0.0},{"x":32.14000000000002,"y":0.0018},{"x":32.65000000000002,"y":0.0},{"x":33.16000000000002,"y":0.0013},{"x":33.670000000000016,"y":0.0},{"x":34.180000000000014,"y":0.0033},{"x":34.69000000000001,"y":0.0},{"x":35.20000000000001,"y":0.0051},{"x":35.71000000000001,"y":0.0},{"x":36.220000000000006,"y":0.0084},{"x":36.730000000000004,"y":0.0},{"x":37.24,"y":0.0072},{"x":37.75,"y":0.0},{"x":38.26,"y":0.0112},{"x":38.769999999999996,"y":0.0},{"x":39.279999999999994,"y":0.0205},{"x":39.78999999999999,"y":0.0},{"x":40.29999999999999,"y":0.0303},{"x":40.80999999999999,"y":0.0},{"x":41.319999999999986,"y":0.029},{"x":41.829999999999984,"y":0.0},{"x":42.33999999999998,"y":0.0285},{"x":42.84999999999998,"y":0.0},{"x":43.35999999999998,"y":0.03},{"x":43.869999999999976,"y":0.0},{"x":44.379999999999974,"y":0.0363},{"x":44.88999999999997,"y":0.0},{"x":45.39999999999997,"y":0.0435},{"x":45.90999999999997,"y":0.0},{"x":46.419999999999966,"y":0.0539},{"x":46.929999999999964,"y":0.0},{"x":47.43999999999996,"y":0.0403},{"x":47.94999999999996,"y":0.0},{"x":48.45999999999996,"y":0.0557},{"x":48.969999999999956,"y":0.0},{"x":49.479999999999954,"y":0.0636},{"x":49.98999999999995,"y":0.0},{"x":50.49999999999995,"y":0.0519},{"x":51.00999999999995,"y":0.0518},{"x":51.519999999999946,"y":0.0},{"x":52.029999999999944,"y":0.0656},{"x":52.53999999999994,"y":0.0},{"x":53.04999999999994,"y":0.0529},{"x":53.55999999999994,"y":0.0},{"x":54.069999999999936,"y":0.0475},{"x":54.579999999999934,"y":0.0},{"x":55.08999999999993,"y":0.0424},{"x":55.59999999999993,"y":0.0},{"x":56.10999999999993,"y":0.0389},{"x":56.619999999999926,"y":0.0},{"x":57.129999999999924,"y":0.0364},{"x":57.63999999999992,"y":0.0},{"x":58.14999999999992,"y":0.0256},{"x":58.65999999999992,"y":0.0},{"x":59.169999999999916,"y":0.017},{"x":59.679999999999914,"y":0.0},{"x":60.18999999999991,"y":0.0217},{"x":60.69999999999991,"y":0.0},{"x":61.20999999999991,"y":0.0129},{"x":61.71999999999991,"y":0.0},{"x":62.229999999999905,"y":0.0171},{"x":62.7399999999999,"y":0.0},{"x":63.2499999999999,"y":0.007},{"x":63.7599999999999,"y":0.0},{"x":64.2699999999999,"y":0.0066},{"x":64.7799999999999,"y":0.0},{"x":65.2899999999999,"y":0.0057},{"x":65.79999999999991,"y":0.0},{"x":66.30999999999992,"y":0.0057},{"x":66.81999999999992,"y":0.0},{"x":67.32999999999993,"y":0.0054},{"x":67.83999999999993,"y":0.0},{"x":68.34999999999994,"y":0.0024},{"x":68.85999999999994,"y":0.0},{"x":69.36999999999995,"y":0.0025},{"x":69.87999999999995,"y":0.0},{"x":70.38999999999996,"y":0.0034},{"x":70.89999999999996,"y":0.0},{"x":71.40999999999997,"y":0.0025},{"x":71.91999999999997,"y":0.0},{"x":72.42999999999998,"y":0.0028},{"x":72.93999999999998,"y":0.0},{"x":73.44999999999999,"y":0.0013},{"x":73.96,"y":0.0},{"x":74.47,"y":9.0E-4},{"x":74.98,"y":0.0},{"x":75.49000000000001,"y":1.0E-4},{"x":76.00000000000001,"y":4.0E-4},{"x":76.51000000000002,"y":0}]},{"name":"0b749fba-5d67-4857-9bbc-590f00ec02d4","values":[{"x":0,"y":1.9287498479639178E-22},{"x":1.0,"y":9.643749239819592E-21},{"x":2.0,"y":2.410937309954894E-19},{"x":3.0,"y":4.0182288499248346E-18},{"x":4.0,"y":5.0227860624060265E-17},{"x":5.0,"y":5.02278606240605E-16},{"x":6.0,"y":4.185655052005016E-15},{"x":7.0,"y":2.989753608575017E-14},{"x":8.0,"y":1.8685960053593824E-13},{"x":9.0,"y":1.0381088918663214E-12},{"x":10.0,"y":5.190544459331622E-12},{"x":11.0,"y":2.359338390605279E-11},{"x":12.0,"y":9.83057662752202E-11},{"x":13.0,"y":3.780991010585382E-10},{"x":14.0,"y":1.3503539323519271E-9},{"x":15.0,"y":4.501179774506423E-9},{"x":16.0,"y":1.4066186795332572E-8},{"x":17.0,"y":4.1371137633330996E-8},{"x":18.0,"y":1.1491982675925232E-7},{"x":19.0,"y":3.024205967348763E-7},{"x":20.0,"y":7.56051491837186E-7},{"x":21.0,"y":1.8001225996123619E-6},{"x":22.0,"y":4.091187726391689E-6},{"x":23.0,"y":8.893886361721129E-6},{"x":24.0,"y":1.85289299202523E-5},{"x":25.0,"y":3.705785984050493E-5},{"x":26.0,"y":7.12651150778935E-5},{"x":27.0,"y":1.3197243532943247E-4},{"x":28.0,"y":2.35665063088271E-4},{"x":29.0,"y":4.063190742901252E-4},{"x":30.0,"y":6.771984571502122E-4},{"x":31.0,"y":0.0010922555760487344},{"x":32.0,"y":0.0017066493375761445},{"x":33.0,"y":0.00258583232966079},{"x":34.0,"y":0.0038026946024423496},{"x":35.0,"y":0.005432420860631981},{"x":36.0,"y":0.00754502897309993},{"x":37.0,"y":0.010195985098783607},{"x":38.0,"y":0.013415769866820876},{"x":39.0,"y":0.017199704957462716},{"x":40.0,"y":0.02149963119682807},{"x":41.0,"y":0.02621906243515542},{"x":42.0,"y":0.031213169565662068},{"x":43.0,"y":0.036294383215886156},{"x":44.0,"y":0.04124361729077892},{"x":45.0,"y":0.04582624143419922},{"x":46.0,"y":0.04981113199369473},{"x":47.0,"y":0.05299056595074075},{"x":48.0,"y":0.05519850619868528},{"x":49.0,"y":0.05632500632519166},{"x":50.0,"y":0.05632500632519166},{"x":51.0,"y":0.05522059443646123},{"x":52.0,"y":0.053096725419673356},{"x":53.0,"y":0.050091250395918156},{"x":54.0,"y":0.04638078740362851},{"x":55.0,"y":0.042164352185116646},{"x":56.0,"y":0.03764674302242531},{"x":57.0,"y":0.03302345879160118},{"x":58.0,"y":0.028468498958277428},{"x":59.0,"y":0.02412584657481072},{"x":60.0,"y":0.02010487214567595},{"x":61.0,"y":0.016479403398094884},{"x":62.0,"y":0.013289841450077125},{"x":63.0,"y":0.010547493214346358},{"x":64.0,"y":0.008240229073708295},{"x":65.0,"y":0.0063386377490063685},{"x":66.0,"y":0.004801998294701994},{"x":67.0,"y":0.0035835808169418556},{"x":68.0,"y":0.002634985894809966},{"x":69.0,"y":0.0019094100687028247},{"x":70.0,"y":0.0013638643347878203},{"x":71.0,"y":9.604678413998337E-4},{"x":72.0,"y":6.669915565276666E-4},{"x":73.0,"y":4.5684353186828375E-4},{"x":74.0,"y":3.086780620731397E-4},{"x":75.0,"y":2.057853747154449E-4},{"x":76.0,"y":1.353851149443671E-4},{"x":77.0,"y":8.791241230153491E-5},{"x":78.0,"y":5.635411044970594E-5},{"x":79.0,"y":3.5667158512470954E-5},{"x":80.0,"y":2.2291974070293968E-5},{"x":81.0,"y":1.3760477821168957E-5},{"x":82.0,"y":8.390535256810436E-6},{"x":83.0,"y":5.054539311331203E-6},{"x":84.0,"y":3.008654351983192E-6},{"x":85.0,"y":1.76979667763715E-6},{"x":86.0,"y":1.0289515567658277E-6},{"x":87.0,"y":5.913514694056451E-7},{"x":88.0,"y":3.3599515307135346E-7},{"x":89.0,"y":1.8876132195021443E-7},{"x":90.0,"y":1.0486740108345176E-7},{"x":91.0,"y":5.761945114475242E-8},{"x":92.0,"y":3.131491910040793E-8},{"x":93.0,"y":1.6835978010971405E-8},{"x":94.0,"y":8.955307452645394E-9},{"x":95.0,"y":4.713319711918409E-9},{"x":96.0,"y":2.454854016624242E-9},{"x":97.0,"y":1.265388668362976E-9},{"x":98.0,"y":6.456064634504716E-10},{"x":99.0,"y":3.2606387042953673E-10}]}],"marks":[{"type":"line","from":{"data":"706a7503-27d9-4da1-a202-2d1191f41478"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"interpolate":{"value":"step-before"},"fill":{"value":"steelblue"},"fillOpacity":{"value":0.4},"stroke":{"value":"steelblue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"0b749fba-5d67-4857-9bbc-590f00ec02d4"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"706a7503-27d9-4da1-a202-2d1191f41478\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"706a7503-27d9-4da1-a202-2d1191f41478\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"706a7503-27d9-4da1-a202-2d1191f41478\", :values ({:x 25.0, :y 0} {:x 25.51, :y 1.0E-4} {:x 26.020000000000003, :y 4.0E-4} {:x 26.530000000000005, :y 0.0} {:x 27.040000000000006, :y 1.0E-4} {:x 27.550000000000008, :y 0.0} {:x 28.06000000000001, :y 3.0E-4} {:x 28.57000000000001, :y 0.0} {:x 29.080000000000013, :y 1.0E-4} {:x 29.590000000000014, :y 0.0} {:x 30.100000000000016, :y 2.0E-4} {:x 30.610000000000017, :y 0.0} {:x 31.12000000000002, :y 5.0E-4} {:x 31.63000000000002, :y 0.0} {:x 32.14000000000002, :y 0.0018} {:x 32.65000000000002, :y 0.0} {:x 33.16000000000002, :y 0.0013} {:x 33.670000000000016, :y 0.0} {:x 34.180000000000014, :y 0.0033} {:x 34.69000000000001, :y 0.0} {:x 35.20000000000001, :y 0.0051} {:x 35.71000000000001, :y 0.0} {:x 36.220000000000006, :y 0.0084} {:x 36.730000000000004, :y 0.0} {:x 37.24, :y 0.0072} {:x 37.75, :y 0.0} {:x 38.26, :y 0.0112} {:x 38.769999999999996, :y 0.0} {:x 39.279999999999994, :y 0.0205} {:x 39.78999999999999, :y 0.0} {:x 40.29999999999999, :y 0.0303} {:x 40.80999999999999, :y 0.0} {:x 41.319999999999986, :y 0.029} {:x 41.829999999999984, :y 0.0} {:x 42.33999999999998, :y 0.0285} {:x 42.84999999999998, :y 0.0} {:x 43.35999999999998, :y 0.03} {:x 43.869999999999976, :y 0.0} {:x 44.379999999999974, :y 0.0363} {:x 44.88999999999997, :y 0.0} {:x 45.39999999999997, :y 0.0435} {:x 45.90999999999997, :y 0.0} {:x 46.419999999999966, :y 0.0539} {:x 46.929999999999964, :y 0.0} {:x 47.43999999999996, :y 0.0403} {:x 47.94999999999996, :y 0.0} {:x 48.45999999999996, :y 0.0557} {:x 48.969999999999956, :y 0.0} {:x 49.479999999999954, :y 0.0636} {:x 49.98999999999995, :y 0.0} {:x 50.49999999999995, :y 0.0519} {:x 51.00999999999995, :y 0.0518} {:x 51.519999999999946, :y 0.0} {:x 52.029999999999944, :y 0.0656} {:x 52.53999999999994, :y 0.0} {:x 53.04999999999994, :y 0.0529} {:x 53.55999999999994, :y 0.0} {:x 54.069999999999936, :y 0.0475} {:x 54.579999999999934, :y 0.0} {:x 55.08999999999993, :y 0.0424} {:x 55.59999999999993, :y 0.0} {:x 56.10999999999993, :y 0.0389} {:x 56.619999999999926, :y 0.0} {:x 57.129999999999924, :y 0.0364} {:x 57.63999999999992, :y 0.0} {:x 58.14999999999992, :y 0.0256} {:x 58.65999999999992, :y 0.0} {:x 59.169999999999916, :y 0.017} {:x 59.679999999999914, :y 0.0} {:x 60.18999999999991, :y 0.0217} {:x 60.69999999999991, :y 0.0} {:x 61.20999999999991, :y 0.0129} {:x 61.71999999999991, :y 0.0} {:x 62.229999999999905, :y 0.0171} {:x 62.7399999999999, :y 0.0} {:x 63.2499999999999, :y 0.007} {:x 63.7599999999999, :y 0.0} {:x 64.2699999999999, :y 0.0066} {:x 64.7799999999999, :y 0.0} {:x 65.2899999999999, :y 0.0057} {:x 65.79999999999991, :y 0.0} {:x 66.30999999999992, :y 0.0057} {:x 66.81999999999992, :y 0.0} {:x 67.32999999999993, :y 0.0054} {:x 67.83999999999993, :y 0.0} {:x 68.34999999999994, :y 0.0024} {:x 68.85999999999994, :y 0.0} {:x 69.36999999999995, :y 0.0025} {:x 69.87999999999995, :y 0.0} {:x 70.38999999999996, :y 0.0034} {:x 70.89999999999996, :y 0.0} {:x 71.40999999999997, :y 0.0025} {:x 71.91999999999997, :y 0.0} {:x 72.42999999999998, :y 0.0028} {:x 72.93999999999998, :y 0.0} {:x 73.44999999999999, :y 0.0013} {:x 73.96, :y 0.0} {:x 74.47, :y 9.0E-4} {:x 74.98, :y 0.0} {:x 75.49000000000001, :y 1.0E-4} {:x 76.00000000000001, :y 4.0E-4} {:x 76.51000000000002, :y 0})} {:name \"0b749fba-5d67-4857-9bbc-590f00ec02d4\", :values ({:x 0, :y 1.9287498479639178E-22} {:x 1.0, :y 9.643749239819592E-21} {:x 2.0, :y 2.410937309954894E-19} {:x 3.0, :y 4.0182288499248346E-18} {:x 4.0, :y 5.0227860624060265E-17} {:x 5.0, :y 5.02278606240605E-16} {:x 6.0, :y 4.185655052005016E-15} {:x 7.0, :y 2.989753608575017E-14} {:x 8.0, :y 1.8685960053593824E-13} {:x 9.0, :y 1.0381088918663214E-12} {:x 10.0, :y 5.190544459331622E-12} {:x 11.0, :y 2.359338390605279E-11} {:x 12.0, :y 9.83057662752202E-11} {:x 13.0, :y 3.780991010585382E-10} {:x 14.0, :y 1.3503539323519271E-9} {:x 15.0, :y 4.501179774506423E-9} {:x 16.0, :y 1.4066186795332572E-8} {:x 17.0, :y 4.1371137633330996E-8} {:x 18.0, :y 1.1491982675925232E-7} {:x 19.0, :y 3.024205967348763E-7} {:x 20.0, :y 7.56051491837186E-7} {:x 21.0, :y 1.8001225996123619E-6} {:x 22.0, :y 4.091187726391689E-6} {:x 23.0, :y 8.893886361721129E-6} {:x 24.0, :y 1.85289299202523E-5} {:x 25.0, :y 3.705785984050493E-5} {:x 26.0, :y 7.12651150778935E-5} {:x 27.0, :y 1.3197243532943247E-4} {:x 28.0, :y 2.35665063088271E-4} {:x 29.0, :y 4.063190742901252E-4} {:x 30.0, :y 6.771984571502122E-4} {:x 31.0, :y 0.0010922555760487344} {:x 32.0, :y 0.0017066493375761445} {:x 33.0, :y 0.00258583232966079} {:x 34.0, :y 0.0038026946024423496} {:x 35.0, :y 0.005432420860631981} {:x 36.0, :y 0.00754502897309993} {:x 37.0, :y 0.010195985098783607} {:x 38.0, :y 0.013415769866820876} {:x 39.0, :y 0.017199704957462716} {:x 40.0, :y 0.02149963119682807} {:x 41.0, :y 0.02621906243515542} {:x 42.0, :y 0.031213169565662068} {:x 43.0, :y 0.036294383215886156} {:x 44.0, :y 0.04124361729077892} {:x 45.0, :y 0.04582624143419922} {:x 46.0, :y 0.04981113199369473} {:x 47.0, :y 0.05299056595074075} {:x 48.0, :y 0.05519850619868528} {:x 49.0, :y 0.05632500632519166} {:x 50.0, :y 0.05632500632519166} {:x 51.0, :y 0.05522059443646123} {:x 52.0, :y 0.053096725419673356} {:x 53.0, :y 0.050091250395918156} {:x 54.0, :y 0.04638078740362851} {:x 55.0, :y 0.042164352185116646} {:x 56.0, :y 0.03764674302242531} {:x 57.0, :y 0.03302345879160118} {:x 58.0, :y 0.028468498958277428} {:x 59.0, :y 0.02412584657481072} {:x 60.0, :y 0.02010487214567595} {:x 61.0, :y 0.016479403398094884} {:x 62.0, :y 0.013289841450077125} {:x 63.0, :y 0.010547493214346358} {:x 64.0, :y 0.008240229073708295} {:x 65.0, :y 0.0063386377490063685} {:x 66.0, :y 0.004801998294701994} {:x 67.0, :y 0.0035835808169418556} {:x 68.0, :y 0.002634985894809966} {:x 69.0, :y 0.0019094100687028247} {:x 70.0, :y 0.0013638643347878203} {:x 71.0, :y 9.604678413998337E-4} {:x 72.0, :y 6.669915565276666E-4} {:x 73.0, :y 4.5684353186828375E-4} {:x 74.0, :y 3.086780620731397E-4} {:x 75.0, :y 2.057853747154449E-4} {:x 76.0, :y 1.353851149443671E-4} {:x 77.0, :y 8.791241230153491E-5} {:x 78.0, :y 5.635411044970594E-5} {:x 79.0, :y 3.5667158512470954E-5} {:x 80.0, :y 2.2291974070293968E-5} {:x 81.0, :y 1.3760477821168957E-5} {:x 82.0, :y 8.390535256810436E-6} {:x 83.0, :y 5.054539311331203E-6} {:x 84.0, :y 3.008654351983192E-6} {:x 85.0, :y 1.76979667763715E-6} {:x 86.0, :y 1.0289515567658277E-6} {:x 87.0, :y 5.913514694056451E-7} {:x 88.0, :y 3.3599515307135346E-7} {:x 89.0, :y 1.8876132195021443E-7} {:x 90.0, :y 1.0486740108345176E-7} {:x 91.0, :y 5.761945114475242E-8} {:x 92.0, :y 3.131491910040793E-8} {:x 93.0, :y 1.6835978010971405E-8} {:x 94.0, :y 8.955307452645394E-9} {:x 95.0, :y 4.713319711918409E-9} {:x 96.0, :y 2.454854016624242E-9} {:x 97.0, :y 1.265388668362976E-9} {:x 98.0, :y 6.456064634504716E-10} {:x 99.0, :y 3.2606387042953673E-10})}), :marks ({:type \"line\", :from {:data \"706a7503-27d9-4da1-a202-2d1191f41478\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :interpolate {:value \"step-before\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 0.4}, :stroke {:value \"steelblue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"0b749fba-5d67-4857-9bbc-590f00ec02d4\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; 
;; **

;; @@
  
;; @@
